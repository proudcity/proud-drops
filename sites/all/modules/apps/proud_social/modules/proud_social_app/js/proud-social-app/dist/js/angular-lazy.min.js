(function(){"use strict";var _containersControllers,_windowEventsHandlerBinded,_windowInViewItems,addWindowInViewItem,angularInviewModule,bindWindowEvents,checkInView,debounce,getBoundingClientRect,getOffsetFromPercentage,getViewportHeight,offsetIsPercentage,removeWindowInViewItem,trackInViewContainer,triggerInViewCallback,unbindWindowEvents,untrackInViewContainer,windowCheckInView,windowEventsHandler,slice=[].slice;angularInviewModule=angular.module("angular-inview",[]).directive("inView",["$parse",function($parse){return{restrict:"A",require:"?^inViewContainer",link:function(scope,element,attrs,containerController){var inViewFunc,item,options,performCheck,ref,ref1;if(attrs.inView)return inViewFunc=$parse(attrs.inView),item={element:element,wasInView:!1,offset:0,customDebouncedCheck:null,callback:function($event,$inview,$inviewpart){return null==$event&&($event={}),scope.$evalAsync(function(_this){return function(){return $event.inViewTarget=element[0],inViewFunc(scope,{$event:$event,$inview:$inview,$inviewpart:$inviewpart})}}(this))}},null!=attrs.inViewOptions&&(options=scope.$eval(attrs.inViewOptions))&&(item.offset=options.offset||[options.offsetTop||0,options.offsetBottom||0],options.debounce&&(item.customDebouncedCheck=debounce(function(event){return checkInView([item],element[0],event)},options.debounce))),performCheck=null!=(ref=null!=(ref1=item.customDebouncedCheck)?ref1:null!=containerController?containerController.checkInView:void 0)?ref:windowCheckInView,null!=containerController?containerController.addItem(item):addWindowInViewItem(item),setTimeout(performCheck),scope.$on("$destroy",function(){return null!=containerController&&containerController.removeItem(item),removeWindowInViewItem(item)})}}}]).directive("inViewContainer",function(){return{restrict:"AC",controller:["$element",function($element){return this.items=[],this.addItem=function(item){return this.items.push(item)},this.removeItem=function(item){var i;return this.items=function(){var j,len,ref,results;for(ref=this.items,results=[],j=0,len=ref.length;len>j;j++)i=ref[j],i!==item&&results.push(i);return results}.call(this)},this.checkInView=function(_this){return function(event){var i,j,len,ref;for(ref=_this.items,j=0,len=ref.length;len>j;j++)i=ref[j],null!=i.customDebouncedCheck&&i.customDebouncedCheck();return checkInView(function(){var k,len1,ref1,results;for(ref1=this.items,results=[],k=0,len1=ref1.length;len1>k;k++)i=ref1[k],null==i.customDebouncedCheck&&results.push(i);return results}.call(_this),$element[0],event)}}(this),this}],link:function(scope,element,attrs,controller){return element.bind("scroll",controller.checkInView),trackInViewContainer(controller),scope.$on("$destroy",function(){return element.unbind("scroll",controller.checkInView),untrackInViewContainer(controller)})}}}),_windowInViewItems=[],addWindowInViewItem=function(item){return _windowInViewItems.push(item),bindWindowEvents()},removeWindowInViewItem=function(item){var i;return _windowInViewItems=function(){var j,len,results;for(results=[],j=0,len=_windowInViewItems.length;len>j;j++)i=_windowInViewItems[j],i!==item&&results.push(i);return results}(),unbindWindowEvents()},_containersControllers=[],trackInViewContainer=function(controller){return _containersControllers.push(controller),bindWindowEvents()},untrackInViewContainer=function(container){var c;return _containersControllers=function(){var j,len,results;for(results=[],j=0,len=_containersControllers.length;len>j;j++)c=_containersControllers[j],c!==container&&results.push(c);return results}(),unbindWindowEvents()},_windowEventsHandlerBinded=!1,windowEventsHandler=function(event){var c,j,len;for(j=0,len=_containersControllers.length;len>j;j++)c=_containersControllers[j],c.checkInView(event);return _windowInViewItems.length?windowCheckInView(event):void 0},bindWindowEvents=function(){return _windowEventsHandlerBinded?void 0:(_windowEventsHandlerBinded=!0,angular.element(window).bind("checkInView click ready scroll resize",windowEventsHandler))},unbindWindowEvents=function(){return!_windowEventsHandlerBinded||_windowInViewItems.length||_containersControllers.length?void 0:(_windowEventsHandlerBinded=!1,angular.element(window).unbind("checkInView click ready scroll resize",windowEventsHandler))},triggerInViewCallback=function(event,item,inview,isTopVisible,isBottomVisible){var elOffsetTop,inviewpart;if(inview){if(elOffsetTop=getBoundingClientRect(item.element[0]).top+window.pageYOffset,inviewpart=isTopVisible&&isBottomVisible&&"neither"||isTopVisible&&"top"||isBottomVisible&&"bottom"||"both",!item.wasInView||item.wasInView!==inviewpart||elOffsetTop!==item.lastOffsetTop)return item.lastOffsetTop=elOffsetTop,item.wasInView=inviewpart,item.callback(event,!0,inviewpart)}else if(item.wasInView)return item.wasInView=!1,item.callback(event,!1)},checkInView=function(items,container,event){var bounds,boundsBottom,boundsTop,element,item,j,k,len,len1,ref,ref1,ref2,ref3,results,viewport;if(viewport={top:0,bottom:getViewportHeight()},container&&container!==window){if(bounds=getBoundingClientRect(container),bounds.top>viewport.bottom||bounds.bottom<viewport.top){for(j=0,len=items.length;len>j;j++)item=items[j],triggerInViewCallback(event,item,!1);return}bounds.top>viewport.top&&(viewport.top=bounds.top),bounds.bottom<viewport.bottom&&(viewport.bottom=bounds.bottom)}for(results=[],k=0,len1=items.length;len1>k;k++)item=items[k],element=item.element[0],bounds=getBoundingClientRect(element),boundsTop=bounds.top+(offsetIsPercentage(item.offset)?getOffsetFromPercentage(bounds,item.offset):parseInt(null!=(ref=null!=(ref1=item.offset)?ref1[0]:void 0)?ref:item.offset)),boundsBottom=bounds.bottom+(offsetIsPercentage(item.offset)?getOffsetFromPercentage(bounds,item.offset):parseInt(null!=(ref2=null!=(ref3=item.offset)?ref3[1]:void 0)?ref2:item.offset)),boundsTop<viewport.bottom&&boundsBottom>=viewport.top?results.push(triggerInViewCallback(event,item,!0,boundsBottom>viewport.bottom,boundsTop<viewport.top)):results.push(triggerInViewCallback(event,item,!1));return results},offsetIsPercentage=function(offset){return"string"==typeof offset&&"%"===offset.slice(-1)},getOffsetFromPercentage=function(bounds,offsetPercentage){var percentage;return percentage=offsetPercentage.substring(0,offsetPercentage.length-1),(bounds.bottom-bounds.top)*(percentage/100)},getViewportHeight=function(){var height,mode,ref;return(height=window.innerHeight)?height:(mode=document.compatMode,(mode||!("undefined"!=typeof $&&null!==$&&null!=(ref=$.support)?ref.boxModel:void 0))&&(height="CSS1Compat"===mode?document.documentElement.clientHeight:document.body.clientHeight),height)},getBoundingClientRect=function(element){var el,parent,top;if(null!=element.getBoundingClientRect)return element.getBoundingClientRect();for(top=0,el=element;el;)top+=el.offsetTop,el=el.offsetParent;for(parent=element.parentElement;parent;)null!=parent.scrollTop&&(top-=parent.scrollTop),parent=parent.parentElement;return{top:top,bottom:top+element.offsetHeight}},debounce=function(f,t){var timer;return timer=null,function(){var args;return args=1<=arguments.length?slice.call(arguments,0):[],null!=timer&&clearTimeout(timer),timer=setTimeout(function(){return f.apply(null,args)},null!=t?t:100)}},windowCheckInView=function(event){var i,j,len;for(j=0,len=_windowInViewItems.length;len>j;j++)i=_windowInViewItems[j],null!=i.customDebouncedCheck&&i.customDebouncedCheck();return checkInView(function(){var k,len1,results;for(results=[],k=0,len1=_windowInViewItems.length;len1>k;k++)i=_windowInViewItems[k],null==i.customDebouncedCheck&&results.push(i);return results}(),null,event)},"function"==typeof define&&define.amd?define(["angular"],angularInviewModule):"undefined"!=typeof module&&module&&module.exports&&(module.exports=angularInviewModule)}).call(this),!function(window){"use strict";angular.module("angular-lazycompile",[]).directive("lazyCompile",["$compile",function($compile){return{scope:{lazyCompile:"=",lazyDecode:"="},link:function(scope,element,attrs){var voidCompile=scope.$watch("lazyCompile",function(value){value&&"false"!=value&&(scope.lazyDecode&&(value=decodeURIComponent(value)),element.html(value),$compile(element.contents())(scope),voidCompile())})}}}])}(window);